(function(){"use strict";var e={8910:function(e,t,a){var s=a(3751),o=a(641);const n={id:"app"};function i(e,t,a,s,i,l){const r=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.bF)(r)])}var l={name:"App"},r=a(6262);const c=(0,r.A)(l,[["render",i]]);var d=c,u=a(5499);const p={class:"app-layout"},g={class:"sidebar"},f={class:"sidebar-nav"},k={class:"main-content"};function v(e,t,a,n,i,l){const r=(0,o.g2)("router-link"),c=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",p,[(0,o.Lk)("aside",g,[t[5]||(t[5]=(0,o.Lk)("div",{class:"sidebar-header"},[(0,o.Lk)("h2",null,"ClickHouse Sinker")],-1)),(0,o.Lk)("nav",f,[(0,o.bF)(r,{to:"/overview",class:"nav-item","active-class":"active"},{default:(0,o.k6)(()=>[...t[0]||(t[0]=[(0,o.Lk)("span",{class:"nav-icon"},"ğŸ“Š",-1),(0,o.Lk)("span",{class:"nav-text"},"ç³»ç»Ÿæ¦‚è§ˆ",-1)])]),_:1}),(0,o.bF)(r,{to:"/tasks",class:"nav-item","active-class":"active"},{default:(0,o.k6)(()=>[...t[1]||(t[1]=[(0,o.Lk)("span",{class:"nav-icon"},"ğŸ“‹",-1),(0,o.Lk)("span",{class:"nav-text"},"ä»»åŠ¡ç®¡ç†",-1)])]),_:1}),(0,o.bF)(r,{to:"/config",class:"nav-item","active-class":"active"},{default:(0,o.k6)(()=>[...t[2]||(t[2]=[(0,o.Lk)("span",{class:"nav-icon"},"âš™ï¸",-1),(0,o.Lk)("span",{class:"nav-text"},"é…ç½®ç®¡ç†",-1)])]),_:1}),(0,o.bF)(r,{to:"/debug",class:"nav-item","active-class":"active"},{default:(0,o.k6)(()=>[...t[3]||(t[3]=[(0,o.Lk)("span",{class:"nav-icon"},"ğŸ›",-1),(0,o.Lk)("span",{class:"nav-text"},"è°ƒè¯•å·¥å…·",-1)])]),_:1}),(0,o.bF)(r,{to:"/logs",class:"nav-item","active-class":"active"},{default:(0,o.k6)(()=>[...t[4]||(t[4]=[(0,o.Lk)("span",{class:"nav-icon"},"ğŸ“",-1),(0,o.Lk)("span",{class:"nav-text"},"æŸ¥çœ‹æ—¥å¿—",-1)])]),_:1})])]),(0,o.Lk)("main",k,[(0,o.bF)(c,null,{default:(0,o.k6)(({Component:e})=>[(0,o.bF)(s.eB,{name:"fade",mode:"out-in"},{default:(0,o.k6)(()=>[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e)))]),_:2},1024)]),_:1})])])}var h={name:"AppLayout"};const m=(0,r.A)(h,[["render",v],["__scopeId","data-v-50d833ee"]]);var L=m;const b={class:"overview-page"},y={class:"page-header"},C=["disabled"],T={key:0,class:"loading-spinner"};function w(e,t,a,s,n,i){const l=(0,o.g2)("OverviewPage");return(0,o.uX)(),(0,o.CE)("div",b,[(0,o.Lk)("div",y,[t[2]||(t[2]=(0,o.Lk)("h1",null,"ç³»ç»Ÿæ¦‚è§ˆ",-1)),(0,o.Lk)("button",{class:"btn refresh-btn",onClick:t[0]||(t[0]=(...e)=>i.refreshOverview&&i.refreshOverview(...e)),disabled:n.loadingStates.overview},[n.loadingStates.overview?((0,o.uX)(),(0,o.CE)("span",T)):(0,o.Q3)("",!0),t[1]||(t[1]=(0,o.eW)(" åˆ·æ–° ",-1))],8,C)]),(0,o.bF)(l,{"proc-info":n.procInfo,"loading-states":n.loadingStates},null,8,["proc-info","loading-states"])])}var I=a(33);const S={class:"metric-grid"},_={class:"metric-row"},D={class:"metric-card"},E={class:"metric-value"},F={class:"metric-card"},N={class:"metric-value"},X={class:"metric-card"},P={class:"metric-value"},M={class:"metric-row"},x={class:"metric-card"},K={class:"metric-value"},O={class:"metric-card"},A={class:"metric-value"},Q={class:"metric-card"},W={class:"metric-value"},H={class:"card"};function j(e,t,a,s,n,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",S,[(0,o.Lk)("div",_,[(0,o.Lk)("div",D,[(0,o.Lk)("div",E,(0,I.v_)(a.procInfo.Version||"N/A"),1),t[0]||(t[0]=(0,o.Lk)("div",{class:"metric-label"},"Sinkerç‰ˆæœ¬",-1))]),(0,o.Lk)("div",F,[(0,o.Lk)("div",N,(0,I.v_)(a.procInfo.Goroutines||0),1),t[1]||(t[1]=(0,o.Lk)("div",{class:"metric-label"},"Goroutines",-1))]),(0,o.Lk)("div",X,[(0,o.Lk)("div",P,(0,I.v_)((a.procInfo.CPU||0).toFixed(1))+"%",1),t[2]||(t[2]=(0,o.Lk)("div",{class:"metric-label"},"CPUä½¿ç”¨ç‡",-1))])]),(0,o.Lk)("div",M,[(0,o.Lk)("div",x,[(0,o.Lk)("div",K,(0,I.v_)(i.formatMemory(a.procInfo.Memory||0)),1),t[3]||(t[3]=(0,o.Lk)("div",{class:"metric-label"},"å†…å­˜ä½¿ç”¨",-1))]),(0,o.Lk)("div",O,[(0,o.Lk)("div",A,(0,I.v_)(a.procInfo.Tasks||0),1),t[4]||(t[4]=(0,o.Lk)("div",{class:"metric-label"},"ä»»åŠ¡ä¸ªæ•°",-1))]),(0,o.Lk)("div",Q,[(0,o.Lk)("div",W,(0,I.v_)(a.procInfo.RecordPoolSize||0),1),t[5]||(t[5]=(0,o.Lk)("div",{class:"metric-label"},"æ¶ˆæ¯æ± å¤§å°",-1))])])]),(0,o.Lk)("div",H,[t[11]||(t[11]=(0,o.Lk)("h4",null,"ç³»ç»ŸçŠ¶æ€",-1)),t[12]||(t[12]=(0,o.Lk)("p",null,[(0,o.Lk)("span",{class:"status-indicator green"}),(0,o.eW)("æœåŠ¡è¿è¡Œæ­£å¸¸")],-1)),(0,o.Lk)("p",null,[t[6]||(t[6]=(0,o.eW)("è¿è¡Œæ—¶é—´: ",-1)),(0,o.Lk)("strong",null,(0,I.v_)(i.formatUptime(a.procInfo.Uptime||0)),1)]),(0,o.Lk)("p",null,[t[7]||(t[7]=(0,o.eW)("å¯åŠ¨æ—¶é—´: ",-1)),(0,o.Lk)("strong",null,(0,I.v_)(i.formatStartTime(a.procInfo.StartTime||0)),1)]),(0,o.Lk)("p",null,[t[8]||(t[8]=(0,o.eW)("Goç‰ˆæœ¬: ",-1)),(0,o.Lk)("strong",null,(0,I.v_)(a.procInfo.GoVersion||"N/A"),1)]),(0,o.Lk)("p",null,[t[9]||(t[9]=(0,o.eW)("æ„å»ºæ—¶é—´: ",-1)),(0,o.Lk)("strong",null,(0,I.v_)(a.procInfo.BuildTime||"N/A"),1)]),(0,o.Lk)("p",null,[t[10]||(t[10]=(0,o.eW)("Commit: ",-1)),(0,o.Lk)("strong",null,(0,I.v_)(i.formatCommit(a.procInfo.Commit)||"N/A"),1)])])])}var $={name:"OverviewPage",props:{procInfo:{type:Object,default:()=>({})},loadingStates:{type:Object,default:()=>({})}},methods:{formatMemory(e){if(!e||0===e)return"0 B";const t=1024,a=["B","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+a[s]},formatUptime(e){if(!e||0===e)return"0s";const t=Math.floor(e/86400),a=Math.floor(e%86400/3600),s=Math.floor(e%3600/60),o=e%60;let n="";return t>0&&(n+=`${t}d `),a>0&&(n+=`${a}h `),s>0&&(n+=`${s}m `),o>0&&(n+=`${o}s`),n.trim()||"0s"},formatStartTime(e){if(!e||0===e)return"N/A";const t=new Date(1e3*e);return t.toLocaleString()},formatCommit(e){return e&&""!==e?e.length>8?e.substring(0,8):e:"N/A"}}};const V=(0,r.A)($,[["render",j],["__scopeId","data-v-16f7d7dd"]]);var G=V,J=a(4335);const U=J.A.create({});var z={getOverview(){return U.get("/api/v1/metrics/procinfo")},getTasks(){return U.get("/api/v1/tasks")},getConfig(){return U.get("/api/v1/config")},getCmdline(){return U.get("/api/v1/cmdline")},refreshTasks(){return U.post("/api/v1/tasks/refresh")},refreshConfig(){return U.post("/api/v1/config/refresh")},getHeapInfo(){return U.get("debug/pprof/heap?debug=1",{responseType:"text"})},getGoroutineInfo(){return U.get("debug/pprof/goroutine?debug=1",{responseType:"text"})},getMetricsInfo(){return U.get("metrics",{responseType:"text"})},getLog(e=0,t=void 0){const a={from:e};return void 0!==t&&(a.error=t),U.get("/api/v1/log",{params:a})},getTaskConfig(e){return U.get(`/api/v1/task/${e}`)},getTaskDbKey(e){return U.get(`/api/v1/dbkey/${e}`)}},B={name:"OverviewView",components:{OverviewPage:G},data(){return{procInfo:{},loadingStates:{overview:!1}}},async mounted(){await this.refreshOverview()},methods:{async refreshOverview(){this.loadingStates.overview=!0;try{const e=await z.getOverview();this.procInfo=e.data.entity||{}}catch(e){alert("è·å–ç³»ç»Ÿæ¦‚è§ˆæ•°æ®å¤±è´¥: "+(e.message||"æœªçŸ¥é”™è¯¯"))}finally{this.loadingStates.overview=!1}}}};const R=(0,r.A)(B,[["render",w],["__scopeId","data-v-e806ef48"]]);var q=R;const Y={class:"tasks-page"},Z={class:"page-header"},ee=["disabled"],te={key:0,class:"loading-spinner"};function ae(e,t,a,s,n,i){const l=(0,o.g2)("TasksList");return(0,o.uX)(),(0,o.CE)("div",Y,[(0,o.Lk)("div",Z,[t[2]||(t[2]=(0,o.Lk)("h1",null,"ä»»åŠ¡ç®¡ç†",-1)),(0,o.Lk)("button",{class:"btn refresh-btn",onClick:t[0]||(t[0]=(...e)=>i.refreshTasks&&i.refreshTasks(...e)),disabled:n.loadingStates.tasks},[n.loadingStates.tasks?((0,o.uX)(),(0,o.CE)("span",te)):(0,o.Q3)("",!0),t[1]||(t[1]=(0,o.eW)(" åˆ·æ–° ",-1))],8,ee)]),(0,o.bF)(l,{tasks:n.tasks,"loading-states":n.loadingStates,onRefreshTasks:i.refreshTasks},null,8,["tasks","loading-states","onRefreshTasks"])])}const se={class:"card"},oe={class:"task-controls"},ne={class:"filter-section"},ie={class:"action-section"},le={class:"task-count"},re={key:0,class:"table-container"},ce={class:"task-table"},de={key:0,class:"sort-indicator"},ue={key:0,class:"sort-indicator"},pe={key:0,class:"sort-indicator"},ge={key:0,class:"sort-indicator"},fe={key:0,class:"sort-indicator"},ke={class:"task-name"},ve=["onClick"],he=["onClick"],me=["disabled"],Le={class:"pagination"},be=["disabled"],ye={class:"page-info"},Ce=["disabled"],Te={key:1,class:"empty-state"},we={class:"modal-content"},Ie={class:"modal-header"},Se={class:"modal-title"},_e={class:"modal-body"},De={key:0,class:"loading"},Ee={key:1,class:"json-display-container"},Fe=["innerHTML"],Ne={class:"modal-content"},Xe={class:"modal-header"},Pe={class:"modal-title"},Me={class:"modal-body"},xe={key:0,class:"loading"},Ke={key:1},Oe={class:"search-container",style:{"margin-bottom":"16px"}},Ae={style:{"margin-left":"8px",color:"#666","font-size":"14px"}},Qe={class:"dbkey-table"},We=["title","onDblclick"],He=["title","onDblclick"],je={key:0},$e={colspan:"6",style:{"text-align":"center",color:"#666",padding:"20px"}};function Ve(e,t,a,n,i,l){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",se,[(0,o.Lk)("div",oe,[(0,o.Lk)("div",ne,[(0,o.bo)((0,o.Lk)("input",{type:"text",placeholder:"ä»»åŠ¡åç§°...",class:"filter-input","onUpdate:modelValue":t[0]||(t[0]=e=>i.taskFilter.name=e),onInput:t[1]||(t[1]=(...e)=>l.applyFilters&&l.applyFilters(...e))},null,544),[[s.Jo,i.taskFilter.name]]),(0,o.bo)((0,o.Lk)("select",{class:"filter-select","onUpdate:modelValue":t[2]||(t[2]=e=>i.taskFilter.type=e),onChange:t[3]||(t[3]=(...e)=>l.applyFilters&&l.applyFilters(...e))},[...t[20]||(t[20]=[(0,o.Lk)("option",{value:""},"æ‰€æœ‰ç±»å‹",-1),(0,o.Lk)("option",{value:"metric"},"æŒ‡æ ‡",-1),(0,o.Lk)("option",{value:"log"},"æ—¥å¿—",-1)])],544),[[s.u1,i.taskFilter.type]]),(0,o.bo)((0,o.Lk)("select",{class:"filter-select","onUpdate:modelValue":t[4]||(t[4]=e=>i.taskFilter.status=e),onChange:t[5]||(t[5]=(...e)=>l.applyFilters&&l.applyFilters(...e))},[...t[21]||(t[21]=[(0,o.Fv)('<option value="" data-v-48309509>å…¨éƒ¨çŠ¶æ€</option><option value="Stable" data-v-48309509>Stable</option><option value="Empty" data-v-48309509>Empty</option><option value="Dead" data-v-48309509>Dead</option><option value="Rebalancing" data-v-48309509>Rebalancing</option>',5)])],544),[[s.u1,i.taskFilter.status]])]),(0,o.Lk)("div",ie,[(0,o.Lk)("span",le,"å…± "+(0,I.v_)(l.filteredTasks.length)+" ä¸ªä»»åŠ¡",1),(0,o.bo)((0,o.Lk)("select",{class:"page-size-select","onUpdate:modelValue":t[6]||(t[6]=e=>i.pageSize=e),onChange:t[7]||(t[7]=(...e)=>l.handlePageSizeChange&&l.handlePageSizeChange(...e))},[...t[22]||(t[22]=[(0,o.Lk)("option",{value:"10"},"10æ¡/é¡µ",-1),(0,o.Lk)("option",{value:"20"},"20æ¡/é¡µ",-1),(0,o.Lk)("option",{value:"50"},"50æ¡/é¡µ",-1)])],544),[[s.u1,i.pageSize]])])]),l.paginatedTasks.length>0?((0,o.uX)(),(0,o.CE)("div",re,[(0,o.Lk)("table",ce,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{onClick:t[8]||(t[8]=e=>l.sortBy("name")),class:"sortable"},[t[23]||(t[23]=(0,o.eW)(" ä»»åŠ¡å ",-1)),"name"===i.sortField?((0,o.uX)(),(0,o.CE)("span",de,(0,I.v_)("asc"===i.sortOrder?"â†‘":"â†“"),1)):(0,o.Q3)("",!0)]),t[28]||(t[28]=(0,o.Lk)("th",null,"é›†ç¾¤",-1)),t[29]||(t[29]=(0,o.Lk)("th",null,"è¡¨å",-1)),t[30]||(t[30]=(0,o.Lk)("th",null,"topic",-1)),t[31]||(t[31]=(0,o.Lk)("th",null,"æ¶ˆè´¹è€…ç»„",-1)),(0,o.Lk)("th",{onClick:t[9]||(t[9]=e=>l.sortBy("type")),class:"sortable"},[t[24]||(t[24]=(0,o.eW)(" ç±»å‹ ",-1)),"type"===i.sortField?((0,o.uX)(),(0,o.CE)("span",ue,(0,I.v_)("asc"===i.sortOrder?"â†‘":"â†“"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("th",{onClick:t[10]||(t[10]=e=>l.sortBy("status")),class:"sortable"},[t[25]||(t[25]=(0,o.eW)(" çŠ¶æ€ ",-1)),"status"===i.sortField?((0,o.uX)(),(0,o.CE)("span",pe,(0,I.v_)("asc"===i.sortOrder?"â†‘":"â†“"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("th",{onClick:t[11]||(t[11]=e=>l.sortBy("lag")),class:"sortable"},[t[26]||(t[26]=(0,o.eW)(" kafka Lag ",-1)),"lag"===i.sortField?((0,o.uX)(),(0,o.CE)("span",ge,(0,I.v_)("asc"===i.sortOrder?"â†‘":"â†“"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("th",{onClick:t[12]||(t[12]=e=>l.sortBy("writeSpeed")),class:"sortable"},[t[27]||(t[27]=(0,o.eW)(" å†™å…¥é€Ÿåº¦ ",-1)),"writeSpeed"===i.sortField?((0,o.uX)(),(0,o.CE)("span",fe,(0,I.v_)("asc"===i.sortOrder?"â†‘":"â†“"),1)):(0,o.Q3)("",!0)]),t[32]||(t[32]=(0,o.Lk)("th",null,"æ“ä½œ",-1))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.paginatedTasks,e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.Name},[(0,o.Lk)("td",null,[(0,o.Lk)("span",ke,(0,I.v_)(e.Name),1)]),(0,o.Lk)("td",null,(0,I.v_)(e.Cluster||"N/A"),1),(0,o.Lk)("td",null,(0,I.v_)(e.Table||"N/A"),1),(0,o.Lk)("td",null,(0,I.v_)(e.Topic||"N/A"),1),(0,o.Lk)("td",null,(0,I.v_)(e.ConsumerGroup||"N/A"),1),(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:(0,I.C4)(["task-type",e.Type])},(0,I.v_)("metric"===e.Type?"æŒ‡æ ‡":"æ—¥å¿—"),3)]),(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:(0,I.C4)(["status-badge",`status-${e.Status.toLowerCase()}`])},(0,I.v_)(e.Status),3)]),(0,o.Lk)("td",{class:(0,I.C4)({"lag-critical":e.Lag>1e4,"lag-warning":e.Lag>1e3&&e.Lag<=1e4})},(0,I.v_)(e.Lag||0),3),(0,o.Lk)("td",null,(0,I.v_)(e.Rate||"N/A"),1),(0,o.Lk)("td",null,[(0,o.Lk)("button",{class:"btn-small",onClick:t=>l.viewTaskConfig(e.Name)},"é…ç½®",8,ve),(0,o.Lk)("button",{class:"btn-small",onClick:t=>l.viewTaskDbKey(e.Name)},"dbkey",8,he),"Dead"===e.Status?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn-small",disabled:a.loadingStates.tasks},"é‡å¯",8,me)):(0,o.Q3)("",!0)])]))),128))])]),(0,o.Lk)("div",Le,[(0,o.Lk)("button",{class:"btn-small",disabled:1===i.currentPage,onClick:t[13]||(t[13]=(...e)=>l.prevPage&&l.prevPage(...e))},"ä¸Šä¸€é¡µ",8,be),(0,o.Lk)("span",ye,(0,I.v_)(i.currentPage)+" / "+(0,I.v_)(l.totalPages),1),(0,o.Lk)("button",{class:"btn-small",disabled:i.currentPage===l.totalPages,onClick:t[14]||(t[14]=(...e)=>l.nextPage&&l.nextPage(...e))},"ä¸‹ä¸€é¡µ",8,Ce)])])):((0,o.uX)(),(0,o.CE)("div",Te," æš‚æ— ä»»åŠ¡æ•°æ® "))]),i.showConfigModal?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-overlay",onClick:t[16]||(t[16]=(0,s.D$)((...e)=>l.closeConfigModal&&l.closeConfigModal(...e),["self"]))},[(0,o.Lk)("div",we,[(0,o.Lk)("div",Ie,[(0,o.Lk)("h3",Se,"ä»»åŠ¡é…ç½® - "+(0,I.v_)(i.currentTaskName),1),(0,o.Lk)("button",{class:"modal-close",onClick:t[15]||(t[15]=(...e)=>l.closeConfigModal&&l.closeConfigModal(...e))},"Ã—")]),(0,o.Lk)("div",_e,[i.loadingConfig?((0,o.uX)(),(0,o.CE)("div",De,"åŠ è½½ä¸­...")):((0,o.uX)(),(0,o.CE)("div",Ee,[(0,o.Lk)("pre",{class:"json-display",innerHTML:l.highlightJson(i.taskConfig)},null,8,Fe)]))])])])):(0,o.Q3)("",!0),i.showDbKeyModal?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"modal-overlay",onClick:t[19]||(t[19]=(0,s.D$)((...e)=>l.closeDbKeyModal&&l.closeDbKeyModal(...e),["self"]))},[(0,o.Lk)("div",Ne,[(0,o.Lk)("div",Xe,[(0,o.Lk)("h3",Pe,"ä»»åŠ¡dbkey - "+(0,I.v_)(i.currentTaskName),1),(0,o.Lk)("button",{class:"modal-close",onClick:t[17]||(t[17]=(...e)=>l.closeDbKeyModal&&l.closeDbKeyModal(...e))},"Ã—")]),(0,o.Lk)("div",Me,[i.loadingDbKey?((0,o.uX)(),(0,o.CE)("div",xe,"åŠ è½½ä¸­...")):((0,o.uX)(),(0,o.CE)("div",Ke,[(0,o.Lk)("div",Oe,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=e=>i.dbKeySearchKeyword=e),placeholder:"æœç´¢æ•°æ®åº“å...",style:{width:"250px",padding:"6px 12px",border:"1px solid #ddd","border-radius":"4px","font-size":"14px"}},null,512),[[s.Jo,i.dbKeySearchKeyword]]),(0,o.Lk)("span",Ae,[(0,o.eW)(" å…± "+(0,I.v_)(Array.isArray(i.taskDbKey)?i.taskDbKey.length:0)+" æ¡è®°å½• ",1),i.dbKeySearchKeyword?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)(", ç­›é€‰å "+(0,I.v_)(l.filteredDbKeyData.length)+" æ¡",1)],64)):(0,o.Q3)("",!0)])]),(0,o.Lk)("table",Qe,[t[33]||(t[33]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"æ•°æ®åº“å"),(0,o.Lk)("th",null,"insertSQL"),(0,o.Lk)("th",null,"seriesMapè¡¨SQL"),(0,o.Lk)("th",null,"å¤„ç†æ•°æ®"),(0,o.Lk)("th",{style:{"min-width":"100px",width:"100px"}},"å­—æ®µä¸ªæ•°"),(0,o.Lk)("th",null,"seriesä¸‹æ ‡")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.filteredDbKeyData,(e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t},[(0,o.Lk)("td",null,(0,I.v_)(e.name||"-"),1),(0,o.Lk)("td",{class:"sql-cell",title:e.prepareSQL,onDblclick:t=>l.copyToClipboard(e.prepareSQL)},(0,I.v_)(e.prepareSQL||"-"),41,We),(0,o.Lk)("td",{class:"sql-cell",title:e.promSerSQL,onDblclick:t=>l.copyToClipboard(e.promSerSQL)},(0,I.v_)(e.promSerSQL||"-"),41,He),(0,o.Lk)("td",null,(0,I.v_)(e.processed||"-"),1),(0,o.Lk)("td",null,(0,I.v_)(e.numDims||"-"),1),(0,o.Lk)("td",null,(0,I.v_)(e.idxSerId||"-"),1)]))),128)),0===l.filteredDbKeyData.length?((0,o.uX)(),(0,o.CE)("tr",je,[(0,o.Lk)("td",$e,(0,I.v_)(i.dbKeySearchKeyword?"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ•°æ®åº“å":"æš‚æ— æ•°æ®"),1)])):(0,o.Q3)("",!0)])])]))])])])):(0,o.Q3)("",!0)])}a(8111),a(2489),a(1701);var Ge={name:"TasksList",props:{tasks:{type:Array,default:()=>[]},loadingStates:{type:Object,default:()=>({})}},emits:["refresh-tasks"],data(){return{taskFilter:{name:"",type:"",status:""},sortField:"name",sortOrder:"asc",currentPage:1,pageSize:10,selectedTask:null,showConfigModal:!1,showDbKeyModal:!1,currentTaskName:"",taskConfig:null,taskDbKey:null,loadingConfig:!1,loadingDbKey:!1,dbKeySearchKeyword:""}},computed:{filteredDbKeyData(){if(!Array.isArray(this.taskDbKey))return[];const e=this.dbKeySearchKeyword.toLowerCase().trim();return e?this.taskDbKey.filter(t=>t.name&&t.name.toLowerCase().includes(e)):this.taskDbKey},filteredTasks(){let e=Array.isArray(this.tasks)?[...this.tasks]:[];return this.taskFilter.name&&(e=e.filter(e=>e&&e.Name&&e.Name.toLowerCase().includes(this.taskFilter.name.toLowerCase()))),this.taskFilter.type&&(e=e.filter(e=>e&&e.Type===this.taskFilter.type)),this.taskFilter.status&&(e=e.filter(e=>e&&e.Status&&e.Status.toLowerCase()===this.taskFilter.status.toLowerCase())),e.sort((e,t)=>{if(!e||!t)return 0;const a={name:"Name",type:"Type",status:"Status",lag:"Lag",writeSpeed:"Rate"},s=a[this.sortField]||this.sortField;let o=e[s],n=t[s];return"string"===typeof o&&"string"===typeof n&&(o=o.toLowerCase(),n=n.toLowerCase()),o<n?"asc"===this.sortOrder?-1:1:o>n?"asc"===this.sortOrder?1:-1:0}),e},formattedTaskData(){return this.selectedTask?JSON.stringify(this.selectedTask,null,2):""},paginatedTasks(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.filteredTasks.slice(e,t)},totalPages(){return Math.ceil(this.filteredTasks.length/this.pageSize)}},methods:{applyFilters(){this.currentPage=1},sortBy(e){this.sortField===e?this.sortOrder="asc"===this.sortOrder?"desc":"asc":(this.sortField=e,this.sortOrder="asc")},prevPage(){this.currentPage>1&&this.currentPage--},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},handlePageSizeChange(){this.currentPage=1},refreshTasks(){this.$emit("refresh-tasks")},async viewTaskConfig(e){this.currentTaskName=e,this.loadingConfig=!0;try{const t=await z.getTaskConfig(e);this.taskConfig=JSON.stringify(t.data,null,2),this.showConfigModal=!0}catch(t){console.error("è·å–ä»»åŠ¡é…ç½®å¤±è´¥:",t),alert("è·å–ä»»åŠ¡é…ç½®å¤±è´¥")}finally{this.loadingConfig=!1}},async viewTaskDbKey(e){this.currentTaskName=e,this.loadingDbKey=!0;try{const t=await z.getTaskDbKey(e);if(t.data&&t.data.entity){const e=Array.isArray(t.data.entity)?t.data.entity:[t.data.entity];this.taskDbKey=e.map(e=>({name:e.Name||"-",prepareSQL:e.PrepareSQL||"-",promSerSQL:e.PromSerSQL||"-",processed:e.Processed||"-",numDims:e.NumDims||"-",idxSerId:e.IdxSerID||"-"}))}else this.taskDbKey=[];this.showDbKeyModal=!0}catch(t){console.error("è·å–ä»»åŠ¡dbkeyå¤±è´¥:",t),alert("è·å–ä»»åŠ¡dbkeyå¤±è´¥")}finally{this.loadingDbKey=!1}},highlightJson(e){if(!e)return"";try{let t=e.replace(/\b(true|false)\b/g,'<span class="boolean">$1</span>').replace(/\b(null)\b/g,'<span class="null">$1</span>').replace(/\b(\d+(?:\.\d+)?)\b/g,'<span class="number">$1</span>');return t=t.replace(/("[^"\\]*(?:\\.[^"\\]*)*")\s*:/g,'<span class="key">$1</span>:'),t=t.replace(/(?::\s*)("[^"\\]*(?:\\.[^"\\]*)*")/g,': <span class="string">$1</span>'),t}catch(t){return console.error("JSONé«˜äº®å¤±è´¥:",t),e}},copyToClipboard(e){if(!e)return;const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t);const a=document.title;document.title="å¤åˆ¶æˆåŠŸï¼",setTimeout(()=>{document.title=a},1e3)},closeConfigModal(){this.showConfigModal=!1,this.taskConfig=null},closeDbKeyModal(){this.showDbKeyModal=!1,this.taskDbKey=null},startTask(e){console.log("å¯åŠ¨ä»»åŠ¡:",e.name),this.refreshTasks()},stopTask(e){console.log("åœæ­¢ä»»åŠ¡:",e.name),this.refreshTasks()},restartTask(e){console.log("é‡å¯ä»»åŠ¡:",e.name),this.refreshTasks()}}};const Je=(0,r.A)(Ge,[["render",Ve],["__scopeId","data-v-48309509"]]);var Ue=Je,ze={name:"TasksView",components:{TasksList:Ue},data(){return{tasks:[],loadingStates:{tasks:!1}}},async mounted(){await this.refreshTasks()},methods:{async refreshTasks(){this.loadingStates.tasks=!0;try{const e=await z.getTasks();console.log("è·å–åˆ°çš„ä»»åŠ¡æ•°æ®:",e.data.entity),this.tasks=e.data.entity.Tasks||[],console.log("è·å–åˆ°çš„ä»»åŠ¡æ•°æ®:",this.tasks)}catch(e){alert("è·å–ä»»åŠ¡æ•°æ®å¤±è´¥: "+(e.message||"æœªçŸ¥é”™è¯¯"))}finally{this.loadingStates.tasks=!1}}}};const Be=(0,r.A)(ze,[["render",ae],["__scopeId","data-v-7d195999"]]);var Re=Be;const qe={class:"config-page"},Ye={class:"page-header"},Ze=["disabled"],et={key:0,class:"loading-spinner"};function tt(e,t,a,s,n,i){const l=(0,o.g2)("AppConfig");return(0,o.uX)(),(0,o.CE)("div",qe,[(0,o.Lk)("div",Ye,[t[2]||(t[2]=(0,o.Lk)("h1",null,"é…ç½®ç®¡ç†",-1)),(0,o.Lk)("button",{class:"btn refresh-btn",onClick:t[0]||(t[0]=(...e)=>i.refreshConfig&&i.refreshConfig(...e)),disabled:n.loadingStates.config||n.loadingStates.cmdline},[n.loadingStates.config||n.loadingStates.cmdline?((0,o.uX)(),(0,o.CE)("span",et)):(0,o.Q3)("",!0),t[1]||(t[1]=(0,o.eW)(" åˆ·æ–° ",-1))],8,Ze)]),(0,o.bF)(l,{config:n.config,"cmdline-config":n.cmdlineConfig,"loading-states":n.loadingStates,onRefreshConfig:i.refreshConfig},null,8,["config","cmdline-config","loading-states","onRefreshConfig"])])}const at={class:"config-view-container"},st={class:"card config-source-card"},ot={class:"config-source"},nt={class:"config-source-row"},it={class:"config-source-value"},lt={key:0,class:"source-local"},rt={key:1,class:"source-remote"},ct={key:0,class:"config-file-path"},dt={class:"config-source-row"},ut={class:"config-source-value"},pt={key:1,class:"nacos-info"},gt={class:"config-source-row"},ft={class:"config-source-value"},kt={class:"config-source-row"},vt={class:"config-source-value"},ht={class:"tab-container"},mt={class:"tab-header"},Lt={key:0,class:"tab-content"},bt={class:"card"},yt={class:"config-form"},Ct={class:"form-group"},Tt={class:"form-value"},wt={class:"form-group"},It={class:"form-value"},St={key:0,class:"form-group"},_t={class:"form-value"},Dt={class:"form-group"},Et={class:"form-value"},Ft={class:"form-group"},Nt={class:"form-value"},Xt={class:"form-group"},Pt={class:"form-value"},Mt={class:"form-group"},xt={class:"form-value"},Kt={class:"form-group"},Ot={class:"form-value"},At={class:"form-group"},Qt={class:"form-value"},Wt={class:"form-group"},Ht={class:"form-value"},jt={class:"form-group"},$t={class:"form-value"},Vt={class:"form-group"},Gt={class:"form-value"},Jt={class:"form-group"},Ut={class:"form-value"},zt={key:1,class:"tab-content"},Bt={class:"card"},Rt={class:"config-form"},qt={class:"form-label"},Yt={key:0,class:"form-value"},Zt={key:0,class:"array-container"},ea={class:"array-index"},ta={class:"array-value"},aa={key:1},sa={class:"nested-object"},oa={class:"nested-key"},na={class:"nested-value"},ia={key:1,class:"form-value"};function la(e,t,a,s,n,i){return(0,o.uX)(),(0,o.CE)("div",at,[(0,o.Lk)("div",st,[t[7]||(t[7]=(0,o.Lk)("h4",null,"é…ç½®æ–‡ä»¶æ¥æº",-1)),(0,o.Lk)("div",ot,[(0,o.Lk)("div",nt,[t[3]||(t[3]=(0,o.Lk)("div",{class:"config-source-label"},"æ¥æºï¼š",-1)),(0,o.Lk)("div",it,[a.cmdlineConfig.NacosCommonDataID&&""!==a.cmdlineConfig.NacosCommonDataID.trim()?((0,o.uX)(),(0,o.CE)("span",rt,"è¿œç¨‹é…ç½® (Nacos)")):((0,o.uX)(),(0,o.CE)("span",lt,"æœ¬åœ°é…ç½®"))])]),a.cmdlineConfig.NacosCommonDataID&&""!==a.cmdlineConfig.NacosCommonDataID.trim()?((0,o.uX)(),(0,o.CE)("div",pt,[(0,o.Lk)("div",gt,[t[5]||(t[5]=(0,o.Lk)("div",{class:"config-source-label"},"Nacos æœåŠ¡ï¼š",-1)),(0,o.Lk)("div",ft,(0,I.v_)(a.cmdlineConfig.NacosAddr||"æœªé…ç½®"),1)]),(0,o.Lk)("div",kt,[t[6]||(t[6]=(0,o.Lk)("div",{class:"config-source-label"},"Nacos å‘½åç©ºé—´ï¼š",-1)),(0,o.Lk)("div",vt,(0,I.v_)(a.cmdlineConfig.NacosNamespaceID||"æœªé…ç½®"),1)])])):((0,o.uX)(),(0,o.CE)("div",ct,[(0,o.Lk)("div",dt,[t[4]||(t[4]=(0,o.Lk)("div",{class:"config-source-label"},"æœ¬åœ°é…ç½®æ–‡ä»¶ï¼š",-1)),(0,o.Lk)("div",ut,(0,I.v_)(a.cmdlineConfig.LocalCfgFile||"æœªé…ç½®"),1)])]))])]),(0,o.Lk)("div",ht,[(0,o.Lk)("div",mt,[(0,o.Lk)("div",{class:(0,I.C4)(["tab-item",{active:"cmdline"===n.activeTab}]),onClick:t[0]||(t[0]=e=>n.activeTab="cmdline")},"å‘½ä»¤è¡Œå‚æ•°",2),(0,o.Lk)("div",{class:(0,I.C4)(["tab-item",{active:"config"===n.activeTab}]),onClick:t[1]||(t[1]=e=>n.activeTab="config")},"ç³»ç»Ÿé…ç½®",2)]),"cmdline"===n.activeTab?((0,o.uX)(),(0,o.CE)("div",Lt,[(0,o.Lk)("div",bt,[(0,o.Lk)("form",yt,[(0,o.Lk)("div",Ct,[t[8]||(t[8]=(0,o.Lk)("label",{class:"form-label"},"æ—¥å¿—çº§åˆ«",-1)),(0,o.Lk)("div",Tt,(0,I.v_)(a.cmdlineConfig.LogLevel||"æœªè®¾ç½®"),1)]),(0,o.Lk)("div",wt,[t[9]||(t[9]=(0,o.Lk)("label",{class:"form-label"},"æ—¥å¿—è·¯å¾„",-1)),(0,o.Lk)("div",It,(0,I.v_)(a.cmdlineConfig.LogPaths||"æœªè®¾ç½®"),1)]),a.cmdlineConfig.NacosCommonDataID&&""!==a.cmdlineConfig.NacosCommonDataID.trim()?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",St,[t[10]||(t[10]=(0,o.Lk)("label",{class:"form-label"},"æœ¬åœ°é…ç½®æ–‡ä»¶",-1)),(0,o.Lk)("div",_t,(0,I.v_)(a.cmdlineConfig.LocalCfgFile||"æœªè®¾ç½®"),1)])),(0,o.Lk)("div",Dt,[t[11]||(t[11]=(0,o.Lk)("label",{class:"form-label"},"Nacosåœ°å€",-1)),(0,o.Lk)("div",Et,(0,I.v_)(a.cmdlineConfig.NacosAddr||"æœªè®¾ç½®"),1)]),(0,o.Lk)("div",Ft,[t[12]||(t[12]=(0,o.Lk)("label",{class:"form-label"},"Nacoså‘½åç©ºé—´ID",-1)),(0,o.Lk)("div",Nt,(0,I.v_)(a.cmdlineConfig.NacosNamespaceID||"æœªè®¾ç½®"),1)]),(0,o.Lk)("div",Xt,[t[13]||(t[13]=(0,o.Lk)("label",{class:"form-label"},"Nacosç»„",-1)),(0,o.Lk)("div",Pt,(0,I.v_)(a.cmdlineConfig.NacosGroup||"æœªè®¾ç½®"),1)]),(0,o.Lk)("div",Mt,[t[14]||(t[14]=(0,o.Lk)("label",{class:"form-label"},"Nacosç”¨æˆ·å",-1)),(0,o.Lk)("div",xt,(0,I.v_)(a.cmdlineConfig.NacosUsername||"æœªè®¾ç½®"),1)]),(0,o.Lk)("div",Kt,[t[15]||(t[15]=(0,o.Lk)("label",{class:"form-label"},"Nacoså¯†ç ",-1)),(0,o.Lk)("div",Ot,(0,I.v_)(a.cmdlineConfig.NacosPassword||"æœªè®¾ç½®"),1)]),(0,o.Lk)("div",At,[t[16]||(t[16]=(0,o.Lk)("label",{class:"form-label"},"Nacos DataID",-1)),(0,o.Lk)("div",Qt,(0,I.v_)(a.cmdlineConfig.NacosDataID||"æœªè®¾ç½®"),1)]),(0,o.Lk)("div",Wt,[t[17]||(t[17]=(0,o.Lk)("label",{class:"form-label"},"NacosæœåŠ¡å",-1)),(0,o.Lk)("div",Ht,(0,I.v_)(a.cmdlineConfig.NacosServiceName||"æœªè®¾ç½®"),1)]),(0,o.Lk)("div",jt,[t[18]||(t[18]=(0,o.Lk)("label",{class:"form-label"},"Nacoså…¬å…±å‘½åç©ºé—´ID",-1)),(0,o.Lk)("div",$t,(0,I.v_)(a.cmdlineConfig.NacosCommonNamespaceID||"æœªè®¾ç½®"),1)]),(0,o.Lk)("div",Vt,[t[19]||(t[19]=(0,o.Lk)("label",{class:"form-label"},"Nacoså…¬å…±ç»„",-1)),(0,o.Lk)("div",Gt,(0,I.v_)(a.cmdlineConfig.NacosCommonGroup||"æœªè®¾ç½®"),1)]),(0,o.Lk)("div",Jt,[t[20]||(t[20]=(0,o.Lk)("label",{class:"form-label"},"Nacoså…¬å…±DataID",-1)),(0,o.Lk)("div",Ut,(0,I.v_)(a.cmdlineConfig.NacosCommonDataID||"æœªè®¾ç½®"),1)])])])])):(0,o.Q3)("",!0),"config"===n.activeTab?((0,o.uX)(),(0,o.CE)("div",zt,[(0,o.Lk)("div",Bt,[(0,o.Lk)("form",Rt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.config,(e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"form-group"},[(0,o.Lk)("label",qt,(0,I.v_)(i.formatKey(t)),1),"object"===typeof e&&null!==e?((0,o.uX)(),(0,o.CE)("div",Yt,[Array.isArray(e)?((0,o.uX)(),(0,o.CE)("div",Zt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e,(e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"array-item"},[(0,o.Lk)("span",ea,(0,I.v_)(t+1)+".",1),(0,o.Lk)("span",ta,(0,I.v_)(i.formatValue(e)),1)]))),128))])):((0,o.uX)(),(0,o.CE)("div",aa,[(0,o.Lk)("div",sa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e,(e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"nested-item"},[(0,o.Lk)("span",oa,(0,I.v_)(i.formatKey(t))+":",1),(0,o.Lk)("span",na,(0,I.v_)(i.formatValue(e)),1)]))),128))])]))])):((0,o.uX)(),(0,o.CE)("div",ia,(0,I.v_)(i.formatValue(e)),1))]))),128))])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{class:"btn refresh-button",onClick:t[2]||(t[2]=t=>e.$emit("refresh-config"))},[...t[21]||(t[21]=[(0,o.Lk)("i",null,"â†»",-1),(0,o.eW)(" åˆ·æ–°é…ç½®",-1)])])])}var ra={name:"AppConfig",props:{config:{type:Object,default:()=>({})},cmdlineConfig:{type:Object,default:()=>({})},loadingStates:{type:Object,default:()=>({})}},emits:["refresh-config"],data(){return{activeTab:"cmdline"}},methods:{formatKey(e){return e},formatValue(e){return null===e?"null":void 0===e?"undefined":"object"===typeof e?JSON.stringify(e,null,2):String(e)}}};const ca=(0,r.A)(ra,[["render",la],["__scopeId","data-v-5fafd224"]]);var da=ca,ua={name:"ConfigView",components:{AppConfig:da},data(){return{config:{},cmdlineConfig:{},loadingStates:{config:!1,cmdline:!1}}},async mounted(){await this.refreshConfig()},methods:{async refreshConfig(){this.loadingStates.config=!0,this.loadingStates.cmdline=!0;try{const[e,t]=await Promise.all([z.getConfig(),z.getCmdline()]);this.config=e.data?.entity||e.data||{},this.cmdlineConfig=t.data?.entity||t.data||{},console.log("è·å–åˆ°çš„é…ç½®æ•°æ®:",this.config),console.log("è·å–åˆ°çš„å‘½ä»¤è¡Œå‚æ•°:",this.cmdlineConfig)}catch(e){console.error("è·å–é…ç½®ä¿¡æ¯å¤±è´¥:",e),alert("è·å–é…ç½®æ•°æ®å¤±è´¥: "+(e.message||"æœªçŸ¥é”™è¯¯"))}finally{this.loadingStates.config=!1,this.loadingStates.cmdline=!1}}}};const pa=(0,r.A)(ua,[["render",tt],["__scopeId","data-v-071ae40e"]]);var ga=pa;const fa={class:"debug-page"};function ka(e,t,a,s,n,i){const l=(0,o.g2)("DebugPanel");return(0,o.uX)(),(0,o.CE)("div",fa,[t[0]||(t[0]=(0,o.Lk)("div",{class:"page-header"},[(0,o.Lk)("h1",null,"è°ƒè¯•å·¥å…·")],-1)),(0,o.bF)(l,{"loading-states":n.loadingStates,"debug-info":n.debugInfo,onUpdateDebugInfo:i.updateDebugInfo},null,8,["loading-states","debug-info","onUpdateDebugInfo"])])}const va={class:"debug-view-container"},ha={class:"card"},ma={class:"tab-container"},La={class:"tab-header-wrapper"},ba={class:"tab-header"},ya={class:"tab-actions"},Ca={key:0,class:"tab-content"},Ta={class:"content-header"},wa={key:0,class:"copy-tooltip"},Ia=["innerHTML"],Sa={key:1,class:"tab-content"},_a={class:"content-header"},Da={key:0,class:"copy-tooltip"},Ea=["innerHTML"],Fa={key:2,class:"tab-content"},Na={class:"filter-container"},Xa=["innerHTML"];function Pa(e,t,a,n,i,l){return(0,o.uX)(),(0,o.CE)("div",va,[(0,o.Lk)("div",ha,[(0,o.Lk)("div",ma,[(0,o.Lk)("div",La,[(0,o.Lk)("div",ba,[(0,o.Lk)("div",{class:(0,I.C4)(["tab-item",{active:"heap"===i.activeTab}]),onClick:t[0]||(t[0]=e=>l.switchTab("heap"))}," Heapä¿¡æ¯ ",2),(0,o.Lk)("div",{class:(0,I.C4)(["tab-item",{active:"goroutine"===i.activeTab}]),onClick:t[1]||(t[1]=e=>l.switchTab("goroutine"))}," Goroutineä¿¡æ¯ ",2),(0,o.Lk)("div",{class:(0,I.C4)(["tab-item",{active:"metrics"===i.activeTab}]),onClick:t[2]||(t[2]=e=>l.switchTab("metrics"))}," æŒ‡æ ‡ä¿¡æ¯ ",2)]),(0,o.Lk)("div",ya,[(0,o.Lk)("button",{class:"btn refresh-btn",onClick:t[3]||(t[3]=(...e)=>l.refreshCurrentTab&&l.refreshCurrentTab(...e))}," åˆ·æ–° ")])]),"heap"===i.activeTab?((0,o.uX)(),(0,o.CE)("div",Ca,[(0,o.Lk)("div",Ta,[t[9]||(t[9]=(0,o.Lk)("span",{class:"content-title"},"Heapä¿¡æ¯",-1)),(0,o.Lk)("div",{class:"copy-icon-wrapper",onClick:t[4]||(t[4]=e=>l.copyToClipboard(i.heapInfo,"heap"))},[(0,o.Lk)("i",{class:(0,I.C4)(["copy-icon",{copied:i.copiedStates.heap}]),title:"å¤åˆ¶å†…å®¹"},null,2),i.copiedStates.heap?((0,o.uX)(),(0,o.CE)("span",wa,"å·²å¤åˆ¶!")):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",{class:"dark-textarea",innerHTML:l.formatText(i.heapInfo)},null,8,Ia)])):(0,o.Q3)("",!0),"goroutine"===i.activeTab?((0,o.uX)(),(0,o.CE)("div",Sa,[(0,o.Lk)("div",_a,[t[10]||(t[10]=(0,o.Lk)("span",{class:"content-title"},"Goroutineä¿¡æ¯",-1)),(0,o.Lk)("div",{class:"copy-icon-wrapper",onClick:t[5]||(t[5]=e=>l.copyToClipboard(i.goroutineInfo,"goroutine"))},[(0,o.Lk)("i",{class:(0,I.C4)(["copy-icon",{copied:i.copiedStates.goroutine}]),title:"å¤åˆ¶å†…å®¹"},null,2),i.copiedStates.goroutine?((0,o.uX)(),(0,o.CE)("span",Da,"å·²å¤åˆ¶!")):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",{class:"dark-textarea",innerHTML:l.formatText(i.goroutineInfo)},null,8,Ea)])):(0,o.Q3)("",!0),"metrics"===i.activeTab?((0,o.uX)(),(0,o.CE)("div",Fa,[(0,o.Lk)("div",Na,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>i.metricsFilter=e),placeholder:"è¾“å…¥å…³é”®è¯ç­›é€‰æŒ‡æ ‡...",class:"filter-input",onInput:t[7]||(t[7]=(...e)=>l.filterMetrics&&l.filterMetrics(...e))},null,544),[[s.Jo,i.metricsFilter]]),i.metricsFilter?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn clear-filter-btn",onClick:t[8]||(t[8]=(...e)=>l.clearMetricsFilter&&l.clearMetricsFilter(...e))}," æ¸…é™¤ç­›é€‰ ")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",{class:"dark-textarea",innerHTML:l.formatText(i.filteredMetricsInfo)},null,8,Xa)])):(0,o.Q3)("",!0)])])])}a(4114);var Ma=a(11),xa=a(9510);a(1895);Ma.A.registerLanguage("bash",xa.A);var Ka={name:"DebugPanel",props:{loadingStates:{type:Object,default:()=>({})},debugInfo:{type:[String,Object],default:""}},emits:["update-debug-info"],watch:{debugInfo:{handler(e){e&&"heap"===this.activeTab&&(this.heapInfo=e)},immediate:!0}},data(){return{activeTab:"heap",heapInfo:"ç‚¹å‡»åˆ·æ–°æŒ‰é’®è·å–Heapä¿¡æ¯...",goroutineInfo:"ç‚¹å‡»åˆ·æ–°æŒ‰é’®è·å–Goroutineä¿¡æ¯...",metricsInfo:"ç‚¹å‡»åˆ·æ–°æŒ‰é’®è·å–æŒ‡æ ‡ä¿¡æ¯...",metricsFilter:"",filteredMetricsInfo:"ç‚¹å‡»åˆ·æ–°æŒ‰é’®è·å–æŒ‡æ ‡ä¿¡æ¯...",copiedStates:{heap:!1,goroutine:!1}}},methods:{switchTab(e){this.activeTab=e,"heap"===e&&"ç‚¹å‡»åˆ·æ–°æŒ‰é’®è·å–Heapä¿¡æ¯..."===this.heapInfo?this.fetchHeapInfo():"goroutine"===e&&"ç‚¹å‡»åˆ·æ–°æŒ‰é’®è·å–Goroutineä¿¡æ¯..."===this.goroutineInfo?this.fetchGoroutineInfo():"metrics"===e&&"ç‚¹å‡»åˆ·æ–°æŒ‰é’®è·å–æŒ‡æ ‡ä¿¡æ¯..."===this.metricsInfo&&this.fetchMetricsInfo()},async fetchHeapInfo(){try{this.heapInfo="åŠ è½½ä¸­...";const e=await z.getHeapInfo();this.heapInfo=e.data}catch(e){const t=e.response?.data||e.message||"æœªçŸ¥é”™è¯¯";this.heapInfo=`âŒ è·å–Heapä¿¡æ¯å¤±è´¥: ${t}`,console.error("Heapä¿¡æ¯è·å–é”™è¯¯:",e)}},async fetchGoroutineInfo(){try{this.goroutineInfo="åŠ è½½ä¸­...";const e=await z.getGoroutineInfo();this.goroutineInfo=e.data}catch(e){const t=e.response?.data||e.message||"æœªçŸ¥é”™è¯¯";this.goroutineInfo=`âŒ è·å–Goroutineä¿¡æ¯å¤±è´¥: ${t}`,console.error("Goroutineä¿¡æ¯è·å–é”™è¯¯:",e)}},async fetchMetricsInfo(){try{this.metricsInfo="åŠ è½½ä¸­...",this.filteredMetricsInfo="åŠ è½½ä¸­...";const e=await z.getMetricsInfo();this.metricsInfo=e.data,this.filterMetrics()}catch(e){const t=e.response?.data||e.message||"æœªçŸ¥é”™è¯¯";this.metricsInfo=`âŒ è·å–æŒ‡æ ‡ä¿¡æ¯å¤±è´¥: ${t}`,this.filteredMetricsInfo=this.metricsInfo,console.error("æŒ‡æ ‡ä¿¡æ¯è·å–é”™è¯¯:",e)}},filterMetrics(){if(!this.metricsInfo||"åŠ è½½ä¸­..."===this.metricsInfo||this.metricsInfo.startsWith("âŒ"))return void(this.filteredMetricsInfo=this.metricsInfo);if(!this.metricsFilter.trim())return void(this.filteredMetricsInfo=this.metricsInfo);const e=this.metricsFilter.toLowerCase(),t=this.metricsInfo.split("\n"),a=[];let s=!1;for(let o=0;o<t.length;o++){const n=t[o];if(n.startsWith("#")||n.trim()&&!n.startsWith("#")&&!n.startsWith(" ")&&!n.endsWith("}"))if(n.toLowerCase().includes(e))s=!0,a.push(n);else{const i=t[o+1]||"";i.trim()&&(i.startsWith(" ")||i.endsWith("}"))&&(n.toLowerCase().includes(e)||i.toLowerCase().includes(e))?(s=!0,a.push(n)):s=!1}else(s||n.toLowerCase().includes(e))&&(a.push(n),n.trim()||(s=!1))}this.filteredMetricsInfo=a.length>0?a.join("\n"):`æ²¡æœ‰æ‰¾åˆ°åŒ…å« "${this.metricsFilter}" çš„æŒ‡æ ‡ä¿¡æ¯`},clearMetricsFilter(){this.metricsFilter="",this.filteredMetricsInfo=this.metricsInfo},copyToClipboard(e,t){if(!e||"åŠ è½½ä¸­..."===e||e.startsWith("âŒ"))return;const a=document.createElement("textarea");a.value=e,a.style.position="fixed",a.style.opacity="0",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),this.copiedStates[t]=!0,setTimeout(()=>{this.copiedStates[t]=!1},2e3)},refreshCurrentTab(){"heap"===this.activeTab?this.fetchHeapInfo():"goroutine"===this.activeTab?this.fetchGoroutineInfo():"metrics"===this.activeTab&&this.fetchMetricsInfo()},formatText(e){if(!e)return"";try{const t=Ma.A.highlight(e,{language:"bash"}).value;return t}catch(t){return console.warn("ä»£ç é«˜äº®å¤±è´¥ï¼Œä½¿ç”¨å›é€€æ ¼å¼:",t),e.replace(/\n/g,"<br>").replace(/ /g,"&nbsp;")}}},mounted(){"heap"===this.activeTab&&this.fetchHeapInfo()}};const Oa=(0,r.A)(Ka,[["render",Pa],["__scopeId","data-v-0839aaa7"]]);var Aa=Oa,Qa={name:"DebugView",components:{DebugPanel:Aa},data(){return{debugInfo:null,loadingStates:{debug:!1}}},methods:{updateDebugInfo(e){this.debugInfo=e}}};const Wa=(0,r.A)(Qa,[["render",ka],["__scopeId","data-v-4c706c5e"]]);var Ha=Wa;const ja={class:"logs-container"},$a={class:"card"},Va={class:"card-body"},Ga={key:0,class:"loading-state"},Ja={key:1,class:"error-state"},Ua={key:2},za={class:"logs-controls"},Ba={class:"control-group"},Ra={class:"control-item"},qa={class:"control-item"},Ya={class:"control-item"},Za={class:"control-actions"},es=["disabled"],ts={key:0},as={key:1},ss={class:"logs-content"},os={key:0,class:"empty-state"},ns={key:1,class:"code-container"},is={class:"line-numbers"},ls=["innerHTML"],rs={class:"pagination"},cs=["disabled"],ds=["disabled"],us={class:"page-info"},ps=["disabled"],gs=["disabled"];function fs(e,t,a,n,i,l){return(0,o.uX)(),(0,o.CE)("div",ja,[(0,o.Lk)("div",$a,[t[13]||(t[13]=(0,o.Lk)("div",{class:"card-header"},[(0,o.Lk)("h2",null,"åº”ç”¨æ—¥å¿—")],-1)),(0,o.Lk)("div",Va,[i.loading?((0,o.uX)(),(0,o.CE)("div",Ga,[...t[9]||(t[9]=[(0,o.Lk)("div",{class:"loading-spinner"},null,-1),(0,o.Lk)("span",null,"åŠ è½½ä¸­...",-1)])])):i.error?((0,o.uX)(),(0,o.CE)("div",Ja,[(0,o.Lk)("p",null,(0,I.v_)(i.error),1),(0,o.Lk)("button",{class:"btn retry-btn",onClick:t[0]||(t[0]=(...e)=>l.fetchLogs&&l.fetchLogs(...e))},"é‡è¯•")])):((0,o.uX)(),(0,o.CE)("div",Ua,[(0,o.Lk)("div",za,[(0,o.Lk)("div",Ba,[(0,o.Lk)("label",Ra,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>i.formatJson=e)},null,512),[[s.lH,i.formatJson]]),t[10]||(t[10]=(0,o.Lk)("span",null,"æ ¼å¼åŒ–JSON",-1))]),(0,o.Lk)("label",qa,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=e=>i.enableWrap=e)},null,512),[[s.lH,i.enableWrap]]),t[11]||(t[11]=(0,o.Lk)("span",null,"æ¢è¡Œæ˜¾ç¤º",-1))]),(0,o.Lk)("label",Ya,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>i.showErrorLogs=e)},null,512),[[s.lH,i.showErrorLogs]]),t[12]||(t[12]=(0,o.Lk)("span",null,"ä»…æ˜¾ç¤ºé”™è¯¯æ—¥å¿—",-1))])]),(0,o.Lk)("div",Za,[(0,o.Lk)("button",{class:"btn refresh-btn",onClick:t[4]||(t[4]=(...e)=>l.refreshLogs&&l.refreshLogs(...e)),disabled:i.loading},[i.loading?((0,o.uX)(),(0,o.CE)("span",as,"åˆ·æ–°ä¸­...")):((0,o.uX)(),(0,o.CE)("span",ts,"åˆ·æ–°"))],8,es)])]),(0,o.Lk)("div",ss,[0===i.logs.length?((0,o.uX)(),(0,o.CE)("div",os," æš‚æ— æ—¥å¿—æ•°æ® ")):((0,o.uX)(),(0,o.CE)("div",ns,[(0,o.Lk)("div",is,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.logs.length,e=>((0,o.uX)(),(0,o.CE)("div",{key:e,class:"line-number"},(0,I.v_)(e),1))),128))]),(0,o.Lk)("pre",{class:(0,I.C4)(["logs-pre",{nowrap:!i.enableWrap}]),innerHTML:l.formatLogs(i.logs)},null,10,ls)]))]),(0,o.Lk)("div",rs,[(0,o.Lk)("button",{class:"page-btn",disabled:1===i.currentPage,onClick:t[5]||(t[5]=e=>l.goToPage(1))}," é¦–é¡µ ",8,cs),(0,o.Lk)("button",{class:"page-btn",disabled:1===i.currentPage,onClick:t[6]||(t[6]=e=>l.goToPage(i.currentPage-1))}," ä¸Šä¸€é¡µ ",8,ds),(0,o.Lk)("span",us," ç¬¬ "+(0,I.v_)(i.currentPage)+" / "+(0,I.v_)(l.totalPages)+" é¡µï¼Œå…± "+(0,I.v_)(i.total)+" æ¡è®°å½• ",1),(0,o.Lk)("button",{class:"page-btn",disabled:i.currentPage===l.totalPages,onClick:t[7]||(t[7]=e=>l.goToPage(i.currentPage+1))}," ä¸‹ä¸€é¡µ ",8,ps),(0,o.Lk)("button",{class:"page-btn",disabled:i.currentPage===l.totalPages,onClick:t[8]||(t[8]=e=>l.goToPage(l.totalPages))}," æœ«é¡µ ",8,gs)])]))])])])}var ks={name:"LogsView",data(){return{logs:[],total:0,currentPage:1,pageSize:100,loading:!1,error:null,formatJson:!1,enableWrap:!0,showErrorLogs:!1}},computed:{totalPages(){return Math.ceil(this.total/this.pageSize)}},watch:{showErrorLogs(){this.currentPage=1,this.fetchLogs()}},mounted(){this.fetchLogs()},methods:{async fetchLogs(){this.loading=!0,this.error=null;const e=(this.currentPage-1)*this.pageSize;try{const t=await z.getLog(e,!!this.showErrorLogs||void 0);console.log("è·å–æ—¥å¿—æˆåŠŸ:",t.data),this.logs=t.data.entity.Lines||[],this.total=t.data.entity.Total||0}catch(t){this.error=`è·å–æ—¥å¿—å¤±è´¥: ${t.response?.data||t.message||"æœªçŸ¥é”™è¯¯"}`,console.error("æ—¥å¿—è·å–é”™è¯¯:",t)}finally{this.loading=!1}},formatLogs(e){return Array.isArray(e)&&0!==e.length?e.map(e=>{try{if(this.formatJson){let t;if("string"===typeof e){const a=e.trim();if(a.startsWith("{")&&a.endsWith("}")||a.startsWith("[")&&a.endsWith("]"))return t=JSON.parse(a),this.highlightJson(JSON.stringify(t,null,2))}}return this.escapeHtml(e)}catch(t){return this.escapeHtml(e)}}).join("\n"):""},escapeHtml(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,e=>t[e])},highlightJson(e){return e.replace(/"([^"\\]|\\.)*"/g,'<span class="json-string">$&</span>').replace(/\b(true|false|null)\b/g,'<span class="json-keyword">$&</span>').replace(/\b\d+(\.\d+)?\b/g,'<span class="json-number">$&</span>').replace(/([{}[\]])/g,'<span class="json-punctuation">$&</span>').replace(/([:,])/g,'<span class="json-separator">$&</span>')},goToPage(e){e>=1&&e<=this.totalPages&&e!==this.currentPage&&(this.currentPage=e,this.fetchLogs())},refreshLogs(){this.fetchLogs()}}};const vs=(0,r.A)(ks,[["render",fs],["__scopeId","data-v-dc32cd1a"]]);var hs=vs;const ms=[{path:"/",component:L,children:[{path:"",redirect:"/overview"},{path:"overview",name:"Overview",component:q},{path:"tasks",name:"Tasks",component:Re},{path:"config",name:"Config",component:ga},{path:"debug",name:"Debug",component:Ha},{path:"logs",name:"Logs",component:hs}]}],Ls=(0,u.aE)({history:(0,u.LA)(""),routes:ms});var bs=Ls;(0,s.Ef)(d).use(bs).mount("#app")}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,o,n){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],n=e[d][2];for(var l=!0,r=0;r<s.length;r++)(!1&n||i>=n)&&Object.keys(a.O).every(function(e){return a.O[e](s[r])})?s.splice(r--,1):(l=!1,n<i&&(i=n));if(l){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,o,n]}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,i=s[0],l=s[1],r=s[2],c=0;if(i.some(function(t){return 0!==e[t]})){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(r)var d=r(a)}for(t&&t(s);c<i.length;c++)n=i[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},s=self["webpackChunksinker_fe"]=self["webpackChunksinker_fe"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],function(){return a(8910)});s=a.O(s)})();
//# sourceMappingURL=app.63f362ec.js.map