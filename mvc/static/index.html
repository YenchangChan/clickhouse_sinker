<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClickHouse Sinker 管理界面</title>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iNCIgZmlsbD0iIzQwOUVGRiIvPgo8cGF0aCBkPSJNOCAxMkgxNlYyMEg4VjEyWiIgZmlsbD0id2hpdGUiLz4KPHA+dGggZD0iTTIwIDhIMjhWMTZIMjBWOFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMCAyMEgyOFYyOEgyMFYyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=">
    <link href="styles/main.css" rel="stylesheet">
</head>
<body>
    <div id="app">
        <div class="header">
            <h2>ClickHouse Sinker 管理界面</h2>
        </div>
        <div class="main-container">
            <div class="sidebar">
                <div class="nav-item" :class="{active: activeTab === 'overview'}" @click="setActiveTab('overview')">
                    概览
                </div>
                <div class="nav-item" :class="{active: activeTab === 'tasks'}" @click="setActiveTab('tasks')">
                    任务管理
                </div>
                <div class="nav-item" :class="{active: activeTab === 'config'}" @click="setActiveTab('config')">
                    配置管理
                </div>
                <div class="nav-item" :class="{active: activeTab === 'debug'}" @click="setActiveTab('debug')">
                    调试工具
                </div>
            </div>
            <div class="content">
                <div v-if="loading" class="loading">
                    正在加载数据...
                </div>
                
                <!-- 动态组件渲染 -->
                <component 
                    :is="currentView"
                    :proc-info="procInfo"
                    :tasks="tasks"
                    :config="config"
                    :cmdline-config="cmdlineConfig"
                    :debug-info="debugInfo"
                    :loading-states="loadingStates"
                    @refresh-tasks="fetchTasks"
                    @refresh-config="refreshConfig"
                    @show-task-detail="showTaskDetail"
                    @show-task-status="showTaskStatus"
                    @show-task-metrics="showTaskMetrics"
                    @update-debug-info="updateDebugInfo"
                />
            </div>
        </div>
            </div>
        </div>

        <!-- 模态框组件 -->
        <task-detail-modal 
            :visible="taskDetailVisible" 
            :task="selectedTask" 
            @close="taskDetailVisible = false"
        />
        
        <task-metrics-modal 
            :visible="taskMetricsVisible" 
            :task="selectedTask" 
            @close="taskMetricsVisible = false"
        />
        
        <task-status-modal
            :visible="taskStatusVisible"
            :task="selectedTask"
            @close="taskStatusVisible = false"
        />
    </div>

    <!-- 加载脚本 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="components/modals.js"></script>
    <script src="views/overview.js"></script>
    <script src="views/tasks.js"></script>
    <script src="views/config.js"></script>
    <script src="views/debug.js"></script>
    <script src="js/app.js"></script>
</body>
</html>